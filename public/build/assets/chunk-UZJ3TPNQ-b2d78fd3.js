import{r as a,U as B,x as ee,k as H,E as ne,J as _,l as te,o as oe,s as se,j as T,X as re}from"./app-efa55958.js";import{c as ue}from"./chunk-OCNORRQU-3e952216.js";import{i as ae}from"./chunk-ROURZMX4-1c85f1b1.js";import{g as ie,a as ce}from"./chunk-3XANSPY5-cf37bc50.js";import{u as le,a as de}from"./index-ba18a0bd.js";import{u as fe}from"./index-01a9cce7.js";import{m as N}from"./chunk-UVUR7MCU-f950a53f.js";import{l as me}from"./index-4647d92d.js";function pe(e){const{key:n}=e;return n.length===1||n.length>1&&/[^a-zA-Z0-9]/.test(n)}function ve(e={}){const{timeout:n=300,preventDefault:t=()=>!0}=e,[s,o]=a.useState([]),r=a.useRef(),u=()=>{r.current&&(clearTimeout(r.current),r.current=null)},c=()=>{u(),r.current=setTimeout(()=>{o([]),r.current=null},n)};a.useEffect(()=>u,[]);function d(f){return i=>{if(i.key==="Backspace"){const l=[...s];l.pop(),o(l);return}if(pe(i)){const l=s.concat(i.key);t(i)&&(i.preventDefault(),i.stopPropagation()),o(l),f(l.join("")),c()}}}return d}function ye(e,n,t,s){if(n==null)return s;if(!s)return e.find(u=>t(u).toLowerCase().startsWith(n.toLowerCase()));const o=e.filter(r=>t(r).toLowerCase().startsWith(n.toLowerCase()));if(o.length>0){let r;return o.includes(s)?(r=o.indexOf(s)+1,r===o.length&&(r=0),o[r]):(r=e.indexOf(o[0]),e[r])}return s}function he(e){const n=e.current;if(!n)return!1;const t=ie(n);return!t||n.contains(t)?!1:!!ae(t)}function Ee(e,n){const{shouldFocus:t,visible:s,focusRef:o}=n,r=t&&!s;B(()=>{if(!r||he(e))return;const u=(o==null?void 0:o.current)||e.current;let c;if(u)return c=requestAnimationFrame(()=>{u.focus({preventScroll:!0})}),()=>{cancelAnimationFrame(c)}},[r,e,o])}function we(e){const{ref:n,handler:t,enabled:s=!0}=e,o=ee(t),u=a.useRef({isPointerDown:!1,ignoreEmulatedMouseEvents:!1}).current;a.useEffect(()=>{if(!s)return;const c=l=>{A(l,n)&&(u.isPointerDown=!0)},d=l=>{if(u.ignoreEmulatedMouseEvents){u.ignoreEmulatedMouseEvents=!1;return}u.isPointerDown&&t&&A(l,n)&&(u.isPointerDown=!1,o(l))},f=l=>{u.ignoreEmulatedMouseEvents=!0,t&&u.isPointerDown&&A(l,n)&&(u.isPointerDown=!1,o(l))},i=W(n.current);return i.addEventListener("mousedown",c,!0),i.addEventListener("mouseup",d,!0),i.addEventListener("touchstart",c,!0),i.addEventListener("touchend",f,!0),()=>{i.removeEventListener("mousedown",c,!0),i.removeEventListener("mouseup",d,!0),i.removeEventListener("touchstart",c,!0),i.removeEventListener("touchend",f,!0)}},[t,n,o,u,s])}function A(e,n){var t;const s=e.target;return s&&!W(s).contains(s)?!1:!((t=n.current)!=null&&t.contains(s))}function W(e){var n;return(n=e==null?void 0:e.ownerDocument)!=null?n:document}function be(e){const{isOpen:n,ref:t}=e,[s,o]=a.useState(n),[r,u]=a.useState(!1);return a.useEffect(()=>{r||(o(n),u(!0))},[n,r,s]),fe(()=>t.current,"animationend",()=>{o(n)}),{present:!(n?!1:!s),onComplete(){var d;const f=ce(t.current),i=new f.CustomEvent("animationend",{bubbles:!0});(d=t.current)==null||d.dispatchEvent(i)}}}var[Me,xe,Ce,Be]=ue(),[De,K]=H({strict:!1,name:"MenuContext"});function ge(e,...n){const t=a.useId(),s=e||t;return a.useMemo(()=>n.map(o=>`${o}-${s}`),[s,n])}function Oe(e){var n;return(n=e==null?void 0:e.ownerDocument)!=null?n:document}function Ie(e={}){const{id:n,closeOnSelect:t=!0,closeOnBlur:s=!0,initialFocusRef:o,autoSelect:r=!0,isLazy:u,isOpen:c,defaultIsOpen:d,onClose:f,onOpen:i,placement:l="bottom-start",lazyBehavior:M="unmount",direction:g,computePositionOnMount:R=!1,...O}=e,w=a.useRef(null),m=a.useRef(null),b=Ce(),C=a.useCallback(()=>{requestAnimationFrame(()=>{var p;(p=w.current)==null||p.focus({preventScroll:!1})})},[]),x=a.useCallback(()=>{const p=setTimeout(()=>{var v;if(o)(v=o.current)==null||v.focus();else{const F=b.firstEnabled();F&&P(F.index)}});S.current.add(p)},[b,o]),I=a.useCallback(()=>{const p=setTimeout(()=>{const v=b.lastEnabled();v&&P(v.index)});S.current.add(p)},[b]),E=a.useCallback(()=>{i==null||i(),r?x():C()},[r,x,C,i]),{isOpen:y,onOpen:h,onClose:D,onToggle:k}=le({isOpen:c,defaultIsOpen:d,onClose:f,onOpen:E});we({enabled:y&&s,ref:w,handler:p=>{var v;(v=m.current)!=null&&v.contains(p.target)||D()}});const U=de({...O,enabled:y||R,placement:l,direction:g}),[L,P]=a.useState(-1);B(()=>{y||P(-1)},[y]),Ee(w,{focusRef:m,visible:y,shouldFocus:!0});const $=be({isOpen:y,ref:w}),[q,V]=ge(n,"menu-button","menu-list"),J=a.useCallback(()=>{h(),C()},[h,C]),S=a.useRef(new Set([]));a.useEffect(()=>{const p=S.current;return()=>{p.forEach(v=>clearTimeout(v)),p.clear()}},[]);const X=a.useCallback(()=>{h(),x()},[x,h]),Z=a.useCallback(()=>{h(),I()},[h,I]),G=a.useCallback(()=>{var p,v;const F=Oe(w.current),Y=(p=w.current)==null?void 0:p.contains(F.activeElement);if(!(y&&!Y))return;const j=(v=b.item(L))==null?void 0:v.node;j==null||j.focus({preventScroll:!0})},[y,L,b]),Q=a.useRef(null);return{openAndFocusMenu:J,openAndFocusFirstItem:X,openAndFocusLastItem:Z,onTransitionEnd:G,unstable__animationState:$,descendants:b,popper:U,buttonId:q,menuId:V,forceUpdate:U.forceUpdate,orientation:"vertical",isOpen:y,onToggle:k,onOpen:h,onClose:D,menuRef:w,buttonRef:m,focusedIndex:L,closeOnSelect:t,closeOnBlur:s,autoSelect:r,setFocusedIndex:P,isLazy:u,lazyBehavior:M,initialFocusRef:o,rafId:Q}}function He(e={},n=null){const t=K(),{onToggle:s,popper:o,openAndFocusFirstItem:r,openAndFocusLastItem:u}=t,c=a.useCallback(d=>{const f=d.key,l={Enter:r,ArrowDown:r,ArrowUp:u}[f];l&&(d.preventDefault(),d.stopPropagation(),l(d))},[r,u]);return{...e,ref:N(t.buttonRef,n,o.referenceRef),id:t.buttonId,"data-active":ne(t.isOpen),"aria-expanded":t.isOpen,"aria-haspopup":"menu","aria-controls":t.menuId,onClick:_(e.onClick,s),onKeyDown:_(e.onKeyDown,c)}}function z(e){var n;return ke(e)&&!!((n=e==null?void 0:e.getAttribute("role"))!=null&&n.startsWith("menuitem"))}function Ne(e={},n=null){const t=K();if(!t)throw new Error("useMenuContext: context is undefined. Seems you forgot to wrap component within <Menu>");const{focusedIndex:s,setFocusedIndex:o,menuRef:r,isOpen:u,onClose:c,menuId:d,isLazy:f,lazyBehavior:i,unstable__animationState:l}=t,M=xe(),g=ve({preventDefault:m=>m.key!==" "&&z(m.target)}),R=a.useCallback(m=>{if(!m.currentTarget.contains(m.target))return;const b=m.key,x={Tab:E=>E.preventDefault(),Escape:c,ArrowDown:()=>{const E=M.nextEnabled(s);E&&o(E.index)},ArrowUp:()=>{const E=M.prevEnabled(s);E&&o(E.index)}}[b];if(x){m.preventDefault(),x(m);return}const I=g(E=>{const y=ye(M.values(),E,h=>{var D,k;return(k=(D=h==null?void 0:h.node)==null?void 0:D.textContent)!=null?k:""},M.item(s));if(y){const h=M.indexOf(y.node);o(h)}});z(m.target)&&I(m)},[M,s,g,c,o]),O=a.useRef(!1);u&&(O.current=!0);const w=me({wasSelected:O.current,enabled:f,mode:i,isSelected:l.present});return{...e,ref:N(r,n),children:w?e.children:null,tabIndex:-1,role:"menu",id:d,style:{...e.style,transformOrigin:"var(--popper-transform-origin)"},"aria-orientation":"vertical",onKeyDown:_(e.onKeyDown,R)}}function We(e={}){const{popper:n,isOpen:t}=K();return n.getPopperProps({...e,style:{visibility:t?"visible":"hidden",...e.style}})}function ke(e){var n;if(!Pe(e))return!1;const t=(n=e.ownerDocument.defaultView)!=null?n:window;return e instanceof t.HTMLElement}function Pe(e){return e!=null&&typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE}var[Fe,$e]=H({name:"MenuStylesContext",errorMessage:`useMenuStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Menu />" `}),Re=e=>{const{children:n}=e,t=te("Menu",e),s=oe(e),{direction:o}=se(),{descendants:r,...u}=Ie({...s,direction:o}),c=a.useMemo(()=>u,[u]),{isOpen:d,onClose:f,forceUpdate:i}=c;return T.jsx(Me,{value:r,children:T.jsx(De,{value:c,children:T.jsx(Fe,{value:t,children:re(n,{isOpen:d,onClose:f,forceUpdate:i})})})})};Re.displayName="Menu";export{Re as M,Ne as a,We as b,$e as c,He as d,K as u};
