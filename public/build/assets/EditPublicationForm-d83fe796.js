import{W as I,R as x,j as e}from"./app-b86f65ba.js";import{P as C}from"./PrimaryButton-5fa5504e.js";import{P as S,F as R}from"./FileUpload-c7623ec4.js";import{F as _}from"./index.esm-0ae8b27f.js";import{I as w,a as P,C as B}from"./chunk-BTVB6U66-d96ddf34.js";import{u as z}from"./chunk-5LTIYV3A-c0d0565c.js";import{G as E}from"./chunk-JARCRF6W-d15390c1.js";import{G as f}from"./chunk-ZPFGWTBB-77e3f6df.js";import{V as j}from"./chunk-NTCQBYKE-9550ce1a.js";import{F as a,I as m}from"./chunk-6CVSDS6C-435f6bfb.js";import{F as l}from"./chunk-GCOAS5YC-ffd1c6d3.js";import{F as n}from"./chunk-5ZQ6B3SW-32c7ef0f.js";import{T as G}from"./chunk-4IH3O7BJ-eeb8f560.js";import{S as k}from"./chunk-3RSXBRAN-3976b745.js";import{A}from"./chunk-ZVFRDZZY-f4d906bd.js";import{B as L}from"./chunk-UVUR7MCU-0c7d985a.js";import{I as T}from"./chunk-FKYN3ZGE-13afe5b8.js";import{B as U}from"./chunk-PULVB27S-40ef37d8.js";import"./chunk-KRPLQIP4-df7f6101.js";import"./chunk-ZHMYA64R-3bf5ed2b.js";import"./chunk-G72KV6MB-ad524ee2.js";import"./chunk-7OLJDQMT-7196af02.js";import"./chunk-2OOHT3W5-264de18c.js";import"./chunk-R3DH46PF-f0689d26.js";import"./chunk-QINAG4RG-a0760f00.js";import"./chunk-SPIKMR6I-87968274.js";import"./iconBase-c9b4a822.js";import"./chunk-DEQZ7DVA-fac225a3.js";function ue({publication:r,categories:d}){const{data:s,setData:o,post:y,processing:v,errors:i}=I({category_id:r.category_id,title:r.title,subtitle:r.subtitle||"",description:r.description,image:r.media[0]?r.media[0].original_url:null,file:r.file?r.file.name:null}),b=z(),[c,h]=x.useState(s.file),[p,g]=x.useState(s.image),F=t=>{t.preventDefault(),y(route("admin.publications.update",{_method:"patch",publication:r.id}),{preserveScroll:!0,onSuccess:()=>b({position:"top-right",title:"Publication Edited.",description:`Publication ${s.title} Successfully`,status:"success",duration:6e3,isClosable:!0}),onError:u=>{console.log(u)}})};return e.jsx("form",{onSubmit:F,children:e.jsxs(E,{templateColumns:{base:"1fr",xl:"repeat(6, minmax(100px, 1fr))"},autoRows:"auto",gap:8,children:[e.jsx(f,{colSpan:{base:1,xl:4},children:e.jsxs(j,{spacing:8,position:"sticky",top:"2rem",children:[e.jsxs(a,{isInvalid:i.title,isRequired:!0,children:[e.jsx(l,{htmlFor:"title",children:"Title/Issue"}),e.jsx(m,{type:"text",id:"title",name:"title",display:"flex",mt:1,autoComplete:"title",value:s.title,onChange:t=>o("title",t.target.value)}),i.title&&e.jsx(n,{mt:2,children:i.title})]}),e.jsxs(a,{isInvalid:i.subtitle,children:[e.jsx(l,{htmlFor:"subtitle",children:"Subtitle"}),e.jsx(m,{type:"text",id:"subtitle",name:"subtitle",display:"flex",mt:1,autoComplete:"subtitle",value:s.subtitle,onChange:t=>o("subtitle",t.target.value)}),i.title&&e.jsx(n,{mt:2,children:i.title})]}),e.jsxs(a,{mt:4,isInvalid:i.description,children:[e.jsx(l,{htmlFor:"description",children:"Description"}),e.jsx(G,{name:"description",id:"description",rows:6,resize:"vertical",value:s.description||"",onChange:t=>o("description",t.target.value)}),i.description&&e.jsx(n,{mt:2,children:i.description})]})]})}),e.jsx(f,{colSpan:{base:1,xl:2},children:e.jsxs(j,{spacing:8,children:[e.jsxs(a,{isInvalid:i.category_id,isRequired:!0,as:"fieldset",children:[e.jsx(l,{as:"legend",htmlFor:"category_id",children:"Category"}),e.jsx(k,{name:"category_id",placeholder:"Select Category",defaultValue:s.category_id,onChange:t=>{o("category_id",t.target.value),d.find(u=>u.id===Number(t.target.value))},children:d&&d.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),i.category_id&&e.jsx(n,{mt:2,children:i.category_id})]}),e.jsxs(a,{mt:4,isInvalid:i.image,children:[e.jsx(l,{htmlFor:"image",children:"Featured Image"}),p&&e.jsxs(e.Fragment,{children:[e.jsx(A,{w:"64",ratio:3/4,children:e.jsx(S,{src:p})}),e.jsx(L,{mt:4,size:"sm",colorScheme:"red",onClick:()=>{g(null)},children:"Remove/Change Image"})]}),!p&&e.jsx(R,{accept:"image/.png,.jpg,.jpeg,.webp",children:e.jsx(m,{type:"file",height:"100%",width:"100%",position:"absolute",top:"0",left:"0",opacity:"0","aria-hidden":"true",accept:"image/.png,.jpg,.jpeg,.webp",id:"image",name:"image",placeholder:"Browse Image",size:"md",onChange:t=>{o("image",t.target.files[0]),g(URL.createObjectURL(t.target.files[0]))}})}),i.image&&e.jsx(n,{mt:2,children:i.image})]}),e.jsxs(a,{mt:4,isInvalid:i.file,children:[e.jsx(l,{htmlFor:"file",children:"File Upload"}),e.jsxs(T,{children:[e.jsx(w,{children:e.jsx(_,{})}),e.jsxs(U,{position:"relative",children:[e.jsx(m,{size:"md",rounded:"none",isReadOnly:!0,value:c||"No file selected"}),e.jsx(m,{type:"file",height:"100%",width:"100%",position:"absolute",top:"0",left:"0",opacity:"0","aria-hidden":"true",accept:".pdf,.doc,.docx,.ppt,.pptx",id:"file",name:"file",size:"md",onChange:t=>{h(t.target.files[0].name),o("file",t.target.files[0])}})]}),c&&e.jsx(P,{children:e.jsx(B,{color:"red.500",onClick:()=>{h(null)}})})]}),i.file&&e.jsx(n,{mt:2,children:i.file})]}),e.jsx(C,{type:"submit",disabled:v,mt:4,w:"64",children:"Save"})]})})]})})}export{ue as default};
