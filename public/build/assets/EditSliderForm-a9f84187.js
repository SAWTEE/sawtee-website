import{W as F,r as C,j as e,A as U,b as _}from"./app-efa55958.js";import{P as E}from"./PrimaryButton-63ebb02b.js";import{P as D,F as M}from"./FileUpload-8df4bbf1.js";import{D as z,c as P}from"./DataTable-ddb92c83.js";import{T as V,a as q}from"./TableActions-765c1289.js";import{u as I}from"./chunk-5LTIYV3A-a216305e.js";import{u as R}from"./chunk-7JBTTEVG-dc1f3de8.js";import{F as x,I as f}from"./chunk-6CVSDS6C-e8322ee8.js";import{F as S}from"./chunk-GCOAS5YC-b63ccf93.js";import{F as b}from"./chunk-5ZQ6B3SW-100d0584.js";import{B as v}from"./chunk-UVUR7MCU-f950a53f.js";import{B as w}from"./chunk-PULVB27S-076b392b.js";import{M as A}from"./chunk-NABYTFTG-9c5cf35d.js";import{M as T,a as k,b as B,c as H,d as L}from"./chunk-4FCEGNGT-53b0de1a.js";import{V as N}from"./chunk-NTCQBYKE-db626ce2.js";import{M as O}from"./chunk-RAWN7VJ3-58bfc8aa.js";import{I as W}from"./chunk-QINAG4RG-420d55bb.js";import{H as G}from"./chunk-3ASUQ6PA-f62de13d.js";import"./chunk-KRPLQIP4-2070ff1c.js";import"./chunk-ZHMYA64R-2b67766a.js";import"./chunk-G72KV6MB-dbbc8cf4.js";import"./chunk-7OLJDQMT-7f99fc6b.js";import"./chunk-2OOHT3W5-8a8b58d4.js";import"./chunk-R3DH46PF-f0689d26.js";import"./chunk-DEQZ7DVA-e22fe2bd.js";import"./index-8eb40aa2.js";import"./iconBase-93c9f5ca.js";import"./chunk-W7WUSNWJ-1d37fd26.js";import"./chunk-CWVAJCXJ-a17c2167.js";import"./index-979d1106.js";import"./chunk-6QYXN73V-98651dd0.js";import"./chunk-3RSXBRAN-bbea2ba3.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./defineProperty-0e4f3c13.js";import"./chunk-ROURZMX4-1c85f1b1.js";import"./chunk-3XANSPY5-cf37bc50.js";import"./chunk-6NHXDBFO-987cde81.js";import"./chunk-SPIKMR6I-154a1106.js";function Be({slider:a,slides:l}){const{data:o,setData:d,post:i,processing:p,errors:g,reset:n}=F({name:a.name}),m=I(),{isOpen:j,onOpen:h,onClose:c}=R(),[s,r]=C.useState([]);C.useEffect(()=>{r(l)},[a]);const t=u=>{u.preventDefault(),i(route("admin.sliders.store",{_method:"PATCH",slider:a.id}),{preserveScroll:!0,onSuccess:()=>{m({position:"top-right",title:"Slider Created.",description:"Slider Created Successfully",status:"success",duration:6e3,isClosable:!0}),c()},onError:y=>{y.title&&n("title")}})};return e.jsxs(e.Fragment,{children:[e.jsx(J,{isOpen:j,onClose:c,slider:a}),l.length<=0&&e.jsxs(U,{mb:"4",status:"warning",p:"4",rounded:"md",variant:"left-accent",children:[e.jsx(_,{}),"No slides added yet."]}),e.jsxs("form",{onSubmit:t,children:[e.jsxs(x,{mt:"4",isInvalid:g.name,children:[e.jsx(S,{htmlFor:"name",children:"Name"}),e.jsx(f,{id:"name",name:"name",value:o.name,onChange:u=>d("name",u.target.value)}),e.jsx(b,{message:g.name,className:"mt-2"})]}),e.jsx(v,{onClick:h,mt:4,children:"Add slide"}),s.length>0&&e.jsx(w,{mt:6,children:e.jsx(Q,{sliderSlides:s,slider:a})}),e.jsx(w,{display:"flex",gap:"4",mt:"4",children:e.jsx(E,{type:"submit",disabled:p,children:"Save slider"})})]})]})}function J({isOpen:a,onClose:l,slider:o}){const{data:d,setData:i,post:p,processing:g,errors:n,reset:m}=F({title:"",subtitle:"",slider_id:o.id}),j=I(),[h,c]=C.useState(null);C.useEffect(()=>{c(null)},[]);const s=r=>{r.preventDefault(),p(route("admin.slides.store"),{preserveScroll:!0,onSuccess:()=>{j({position:"top-right",title:"Slide Created.",description:"Slide Created Successfully",status:"success",duration:6e3,isClosable:!0}),c(null),l()},onError:t=>{t.title&&m("title")}})};return e.jsxs(A,{size:"xl",isOpen:a,onClose:l,children:[e.jsx(T,{}),e.jsxs(k,{as:"form",onSubmit:s,children:[e.jsx(B,{children:"Add slide"}),e.jsx(H,{}),e.jsx(L,{children:e.jsxs(N,{gap:"6",alignItems:"start",children:[e.jsxs(x,{mt:"4",isInvalid:n.title,children:[e.jsx(S,{htmlFor:"title",children:"Title"}),e.jsx(f,{id:"title",name:"title",placeholder:"enter title",onChange:r=>i("title",r.target.value)}),e.jsx(b,{message:n.title,className:"mt-2"})]}),e.jsxs(x,{mt:"4",children:[e.jsx(S,{htmlFor:"subtitle",children:"Subtitle"}),e.jsx(f,{id:"subtitle",name:"subtitle",placeholder:"enter subtitle",onChange:r=>i("subtitle",r.target.value)}),e.jsx(b,{message:n.subtitle,className:"mt-2"})]}),e.jsxs(x,{mt:4,isRequired:!0,children:[e.jsx(S,{htmlFor:"image",children:"Slide Image"}),h&&e.jsxs(e.Fragment,{children:[e.jsx(D,{src:h,aspectRatio:16/9}),e.jsx(v,{mt:4,size:"sm",colorScheme:"red",onClick:()=>{c(null)},children:"Remove/Change Image"})]}),!h&&e.jsx(M,{accept:"image/.png,.jpg,.jpeg,.webp",children:e.jsx(f,{type:"file",height:"100%",width:"100%",position:"absolute",top:"0",left:"0",opacity:"0","aria-hidden":"true",accept:"image/.png,.jpg,.jpeg,.webp",id:"image",name:"image",size:"md",onChange:r=>{i("image",r.target.files[0]),c(URL.createObjectURL(r.target.files[0]))}})}),n.image&&e.jsx(b,{mt:2,children:n.image})]})]})}),e.jsxs(O,{children:[e.jsx(E,{type:"submit",isLoading:g,mr:3,children:"Create"}),e.jsx(v,{variant:"ghost",colorScheme:"red",onClick:l,children:"Cancel"})]})]})]})}function K({isOpen:a,onClose:l,slide:o,slider:d}){const{data:i,setData:p,post:g,processing:n,errors:m,reset:j}=F({title:o.title,subtitle:o.subtitle,slider_id:d.id,image:o.media[0].preview_url}),h=I();C.useEffect(()=>{p("image",o.media[0].preview_url)},[o]);const c=s=>{s.preventDefault(),g(route("admin.slides.store",{_method:"PATCH",slide:o.id,slider:d.id}),{preserveScroll:!0,onSuccess:()=>{h({position:"top-right",title:"Slide Updated.",description:"Slide Updated Successfully",status:"success",duration:6e3,isClosable:!0}),l()},onError:r=>{r.title&&j("title")}})};return e.jsxs(A,{size:"xl",isOpen:a,onClose:l,children:[e.jsx(T,{}),e.jsxs(k,{as:"form",onSubmit:c,children:[e.jsx(B,{children:"Edit slide"}),e.jsx(H,{}),e.jsx(L,{children:e.jsxs(N,{gap:"6",alignItems:"start",children:[e.jsxs(x,{mt:"4",isInvalid:m.title,children:[e.jsx(S,{htmlFor:"title",children:"Title"}),e.jsx(f,{id:"title",name:"title",value:i.title,onChange:s=>p("title",s.target.value)}),e.jsx(b,{message:m.title,className:"mt-2"})]}),e.jsxs(x,{mt:"4",children:[e.jsx(S,{htmlFor:"subtitle",children:"Subtitle"}),e.jsx(f,{id:"subtitle",name:"subtitle",value:i.subtitle,onChange:s=>p("subtitle",s.target.value)}),e.jsx(b,{message:m.subtitle,className:"mt-2"})]}),e.jsxs(x,{mt:4,isRequired:!0,children:[e.jsx(S,{htmlFor:"image",children:"Slide Image"}),i.image&&e.jsxs(e.Fragment,{children:[e.jsx(D,{src:i.image,aspectRatio:16/9}),e.jsx(v,{mt:4,size:"sm",colorScheme:"red",onClick:()=>{setImage(null)},children:"Remove/Change Image"})]}),!i.image&&e.jsx(M,{accept:"image/.png,.jpg,.jpeg,.webp",children:e.jsx(f,{type:"file",height:"100%",width:"100%",position:"absolute",top:"0",left:"0",opacity:"0","aria-hidden":"true",accept:"image/.png,.jpg,.jpeg,.webp",id:"image",name:"image",size:"md",onChange:s=>{p("image",s.target.files[0]),setImage(URL.createObjectURL(s.target.files[0]))}})}),m.image&&e.jsx(b,{mt:2,children:m.image})]})]})}),e.jsxs(O,{children:[e.jsx(E,{type:"submit",isLoading:n,mr:3,children:"Save"}),e.jsx(v,{variant:"ghost",colorScheme:"red",onClick:l,children:"Cancel"})]})]})]})}function Q({sliderSlides:a,slider:l}){const o=I(),d=P(),{processing:i,delete:p}=F(),[g,n]=C.useState(null),m=(t,u)=>{t.preventDefault(),n(a.filter(y=>y.id===u)[0]),h()},{isOpen:j,onOpen:h,onClose:c}=R(),s=(t,u)=>{t.preventDefault(),p(route("admin.slides.destroy",u,l.id),{preserveScroll:!0,onSuccess:()=>o({position:"top-right",title:"Slider deleted.",description:"Slider deleted Successfully",status:"error",duration:6e3,isClosable:!0}),onError:()=>console.log("Error while deleting")})},r=C.useMemo(()=>[d.accessor("id",{cell:t=>t.getValue(),header:"ID"}),d.accessor("title",{cell:t=>t.getValue(),header:"Title"}),d.accessor("subtitle",{cell:t=>t.getValue(),header:"Subtitle"}),d.accessor("media",{cell:t=>e.jsx(W,{width:"100px",aspectRatio:16/9,src:t.getValue()[0].preview_url}),header:"Image"}),d.display({id:"Actions",cell:t=>e.jsxs(G,{spacing:4,children:[e.jsx(V,{onClick:u=>m(u,t.row.original.id),isDisabled:i}),e.jsx(q,{onClick:u=>s(u,t.row.original.id),isDisabled:i})]}),header:"Actions"})],[]);return e.jsxs(e.Fragment,{children:[g&&e.jsx(K,{isOpen:j,onClose:c,slider:l,slide:g,setEditSlide:n}),e.jsx(z,{defaultColumns:r,data:a,pagination:!1,showColumnFilters:!1})]})}export{Be as default};
