import{W as L,R as d,j as e,u as M}from"./app-b86f65ba.js";import{P as G}from"./PrimaryButton-5fa5504e.js";import{P as q,F as U}from"./FileUpload-c7623ec4.js";import{C as V}from"./ContentEditor-0b34f845.js";import{F as W}from"./index.esm-0ae8b27f.js";import{Q as b}from"./chunk-SK7D2XJH-a82b1f42.js";import{I as K,a as N,C as Q}from"./chunk-BTVB6U66-d96ddf34.js";import{C as $}from"./MultiSelect-8a753065.js";import{T as _}from"./chunk-KICXRNWJ-cce62d2f.js";import{R as H}from"./chunk-RDF2AYID-ebdd0d76.js";import{I as J}from"./chunk-FKYN3ZGE-13afe5b8.js";import{F as r,I as n}from"./chunk-6CVSDS6C-435f6bfb.js";import{u as X}from"./chunk-5LTIYV3A-c0d0565c.js";import{G as Y}from"./chunk-JARCRF6W-d15390c1.js";import{G as S}from"./chunk-ZPFGWTBB-77e3f6df.js";import{V as x}from"./chunk-NTCQBYKE-9550ce1a.js";import{F as a}from"./chunk-GCOAS5YC-ffd1c6d3.js";import{F as o}from"./chunk-5ZQ6B3SW-32c7ef0f.js";import{T as y}from"./chunk-4IH3O7BJ-eeb8f560.js";import{A as Z,a as ee,b as te,c as ie,d as se}from"./chunk-CRBMUVJA-4a3248ec.js";import{B as F}from"./chunk-PULVB27S-40ef37d8.js";import{S as I}from"./chunk-3RSXBRAN-3976b745.js";import{S as re}from"./chunk-ZHMYA64R-3bf5ed2b.js";import{B as ae}from"./chunk-UVUR7MCU-0c7d985a.js";import{I as le}from"./chunk-6QYXN73V-7615980f.js";import"./chunk-KRPLQIP4-df7f6101.js";import"./chunk-7OLJDQMT-7196af02.js";import"./chunk-2OOHT3W5-264de18c.js";import"./chunk-R3DH46PF-f0689d26.js";import"./chunk-QINAG4RG-a0760f00.js";import"./chunk-SPIKMR6I-87968274.js";import"./index-2d98b792.js";import"./iconBase-c9b4a822.js";import"./chunk-DEQZ7DVA-fac225a3.js";import"./defineProperty-0e4f3c13.js";import"./createSuper-0a89e92d.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./chunk-KC77MHL3-371d887a.js";import"./chunk-G72KV6MB-ad524ee2.js";import"./chunk-57I6FYPZ-cada06a1.js";import"./chunk-W7WUSNWJ-3fd59087.js";import"./chunk-UZJ3TPNQ-07f25586.js";import"./chunk-OCNORRQU-c1384ea3.js";import"./chunk-ROURZMX4-1c85f1b1.js";import"./chunk-3XANSPY5-cf37bc50.js";import"./index-895fc961.js";import"./index-129ac873.js";import"./index-4647d92d.js";import"./index-979d1106.js";import"./chunk-RKXMPHPI-9f674841.js";import"./chunk-6NHXDBFO-987cde81.js";function at({categories:p,themes:g,tags:k}){const{data:m,setData:s,post:w,processing:A,errors:i}=L({category_id:"",theme_id:"",title:"",slug:"",content:"",excerpt:"",author:"",status:"unpublished",image:"",file:"",link:null,genre:"",published_at:new Date,meta_title:"",meta_description:""}),R=X(),[h,j]=d.useState(null),[u,f]=d.useState(null),[c,T]=d.useState(null),[C,z]=d.useState(m.slug),[E,v]=d.useState([]),[P,oe]=d.useState(()=>{let t=[];return k.map(l=>{t.push({value:l.id,label:l.name})}),t});d.useEffect(()=>{m.title&&(z(m.title.toLowerCase().replace(/\s+/g,"-")).replaceAll(",",""),s("slug",C))},[m.title]);function D(t){let l=[];v(t),t.forEach(B=>l.push({tag_id:B.value,post_id:postData.id})),s("tags",l)}const O=t=>{t.preventDefault(),w(route("admin.posts.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>R({position:"top-right",title:"Post Created.",description:`${m.title} post Successfully`,status:"success",duration:6e3,isClosable:!0}),onError:l=>{console.log(l)}})};return e.jsx("form",{onSubmit:O,children:e.jsxs(Y,{templateColumns:{base:"1fr",xl:"repeat(7, minmax(auto, 1fr))"},autoRows:"auto",gap:8,children:[e.jsx(S,{colSpan:{base:1,xl:5},children:e.jsxs(x,{spacing:8,position:"sticky",top:"2rem",children:[e.jsxs(r,{isInvalid:i.title,isRequired:!0,children:[e.jsx(a,{htmlFor:"title",children:"Title"}),e.jsx(n,{type:"text",id:"title",name:"title",placeholder:"Add Post title here",display:"flex",mt:1,autoComplete:"title",onChange:t=>s("title",t.target.value)}),i.title&&e.jsx(o,{mt:2,children:i.title})]}),e.jsxs(r,{children:[e.jsx(a,{htmlFor:"slug",children:"Slug"}),e.jsx(n,{type:"text",id:"slug",isReadOnly:!0,name:"slug",color:M("blue.600","blue.300"),value:C,display:"flex",mt:1})]}),e.jsxs(r,{mt:4,isInvalid:i.content,children:[e.jsx(a,{htmlFor:"content",children:"Content"}),e.jsx(V,{name:"content",id:"content",onChange:(t,l)=>s("content",l.getContent())}),i.content&&e.jsx(o,{mt:2,children:i.content})]}),e.jsxs(r,{isInvalid:i.excerpt,children:[e.jsx(a,{htmlFor:"excerpt",children:"Excerpt/Short Description"}),e.jsx(y,{id:"excerpt",name:"excerpt",display:"flex",isInvalid:i.excerpt,resize:"vertical",placeholder:"Short Description",rows:6,mt:1,autoComplete:"excerpt",onChange:t=>s("excerpt",t.target.value)}),i.title&&e.jsx(o,{mt:2,children:i.title})]})]})}),e.jsx(S,{colSpan:{base:1,xl:2},children:e.jsxs(x,{spacing:8,children:[e.jsx(Z,{allowToggle:!0,w:"full",children:e.jsxs(ee,{children:[e.jsx("h2",{children:e.jsxs(te,{_expanded:{bg:"gray.600",color:"white"},children:[e.jsxs(F,{as:"span",flex:"1",textAlign:"left",fontWeight:"semibold",children:["SEO Meta Tags ",e.jsx(_,{label:"Add title and description for SEO",fontSize:"xs",children:e.jsx(b,{boxSize:3})})]}),e.jsx(ie,{})]})}),e.jsx(se,{pb:4,children:e.jsxs(x,{gap:"6",alignItems:"start",children:[e.jsxs(r,{mt:"4",isInvalid:i.meta_title,children:[e.jsx(a,{htmlFor:"meta_title",children:"Meta Title"}),e.jsx(n,{id:"meta_title",name:"meta_title",placeholder:"enter meta title",onChange:t=>s("meta_title",t.target.value)}),e.jsx(o,{message:i.meta_title,className:"mt-2"})]}),e.jsxs(r,{mt:"4",isInvalid:i.meta_description,children:[e.jsx(a,{htmlFor:"meta_description",children:"Meta Description"}),e.jsx(y,{id:"meta_description",name:"meta_description",placeholder:"enter meta_description",rows:3,resize:"vertical",onChange:t=>s("meta_description",t.target.value)}),e.jsx(o,{message:i.meta_description,className:"mt-2"})]})]})})]})}),e.jsxs(r,{isInvalid:i.category_id,isRequired:!0,as:"fieldset",children:[e.jsx(a,{as:"legend",htmlFor:"category_id",children:"Category"}),e.jsx(I,{name:"category_id",placeholder:"Select Category",onChange:t=>{s("category_id",t.target.value),T(p.filter(l=>l.id==t.target.value)[0].name)},children:p&&p.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))}),i.category_id&&e.jsx(o,{mt:2,children:i.category_id})]}),e.jsxs(r,{isInvalid:i.published_at,children:[e.jsx(a,{as:"legend",htmlFor:"published_at",children:"Published At"}),e.jsx(n,{type:"datetime-local",id:"published_at",name:"published_at",onChange:t=>s("published_at",t.target.value)}),i.published_at&&e.jsx(o,{mt:2,children:i.published_at})]}),c!=="Covid"&&e.jsxs(r,{isInvalid:i.theme_id,as:"fieldset",children:[e.jsx(a,{as:"legend",htmlFor:"theme_id",children:"Theme"}),e.jsx(I,{name:"theme_id",placeholder:"Select theme",onChange:t=>{s("theme_id",t.target.value)},children:g&&g.map(t=>e.jsx("option",{value:t.id,children:t.title},t.id))}),i.theme_id&&e.jsx(o,{mt:2,children:i.theme_id})]}),c!=="Covid"&&e.jsxs(r,{py:4,id:"tags",children:[e.jsx(a,{htmlFor:"tags",children:" Add Tags"}),e.jsx($,{isMulti:!0,name:"tags",options:P,variant:"filled",tagVariant:"solid",placeholder:"Select Tags",value:E,onChange:t=>{v(t),D(t)},selectedOptionColorScheme:"blue"})]}),e.jsxs(r,{mt:4,isInvalid:i.status,isRequired:!0,as:"fieldset",children:[e.jsx(a,{as:"legend",htmlFor:"status",children:"Status"}),e.jsx(re,{direction:"row",flexWrap:"wrap",spacing:8,children:["unpublished","draft","published"].map(t=>e.jsx(H,{name:"status",isChecked:m.status===t,value:t,onChange:l=>{s("status",l.target.value)},children:t},t))}),i.status&&e.jsx(o,{mt:2,children:i.status})]}),e.jsxs(r,{isInvalid:i.author,mt:4,children:[e.jsxs(a,{htmlFor:"author",children:["Author/s ",e.jsx(_,{label:"Add author name, if multple authors use comma seperated format. Eg: Paras Kharel, Dikshya Singh, Kshitiz Dahal",fontSize:"xs",float:"right",children:e.jsx(b,{boxSize:3})})]}),e.jsx(n,{type:"text",id:"author",name:"author",display:"block",placeholder:"Add author full name",w:"full",mt:1,autoComplete:"author",onChange:t=>s("author",t.target.value)}),i.author&&e.jsx(o,{mt:2,children:i.author})]}),c==="Covid"&&e.jsxs(r,{isInvalid:i.genre,mt:4,children:[e.jsx(a,{htmlFor:"genre",children:"Genre"}),e.jsx(n,{type:"text",id:"genre",name:"genre",display:"block",w:"full",mt:1,autoComplete:"genre",onChange:t=>s("genre",t.target.value)}),i.genre&&e.jsx(o,{mt:2,children:i.genre})]}),c==="Covid"&&e.jsxs(r,{isInvalid:i.link,isRequired:!0,mt:4,children:[e.jsx(a,{htmlFor:"link",children:"External Link"}),e.jsx(n,{type:"text",id:"link",name:"link",display:"block",w:"full",mt:1,autoComplete:"link",onChange:t=>s("link",t.target.value)}),i.author&&e.jsx(o,{mt:2,children:i.author})]}),e.jsxs(r,{mt:4,children:[e.jsx(a,{htmlFor:"image",children:"Featured Image"}),u&&e.jsxs(e.Fragment,{children:[e.jsx(q,{src:u}),e.jsx(ae,{mt:4,size:"sm",colorScheme:"red",onClick:()=>{f(null)},children:"Remove/Change Image"})]}),!u&&e.jsx(U,{accept:"image/.png,.jpg,.jpeg,.webp",children:e.jsx(n,{type:"file",height:"100%",width:"100%",position:"absolute",top:"0",left:"0",opacity:"0",cursor:"pointer","aria-hidden":"true",accept:"image/.png,.jpg,.jpeg,.webp",id:"image",name:"image",size:"md",onChange:t=>{s("image",t.target.files[0]),f(URL.createObjectURL(t.target.files[0]))}})})]}),e.jsxs(r,{mt:4,children:[e.jsx(a,{htmlFor:"file",children:"File Upload"}),e.jsxs(J,{cursor:"pointer",children:[e.jsx(K,{children:e.jsx(W,{})}),e.jsxs(F,{position:"relative",children:[e.jsx(n,{size:"md",isReadOnly:!0,placeholder:h||"click to select file"}),e.jsx(n,{type:"file",multiple:!0,height:"100%",width:"100%",position:"absolute",cursor:"pointer",top:"0",left:"0",opacity:"0","aria-hidden":"true",accept:".pdf,.doc,.docx,.ppt,.pptx",id:"file",name:"file",size:"md",onChange:t=>{j(t.target.files[0].name),s("file",t.target.files[0])}})]}),h&&e.jsx(N,{children:e.jsx(le,{icon:e.jsx(Q,{}),color:"red.500",onClick:()=>{j(null)}})})]})]}),e.jsx(G,{type:"submit",isLoading:A,mt:4,w:"md",maxW:"full",children:"Save"})]})})]})})}export{at as default};
